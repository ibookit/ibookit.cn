<!DOCTYPE html>












  


<html class="theme-next gemini use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">






















<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">

<link rel="stylesheet" href="/css/main.css?v=7.1.2">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.1.2">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.1.2">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.1.2">


  <link rel="mask-icon" href="/images/logo.svg?v=7.1.2" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '7.1.2',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta property="og:type" content="website">
<meta property="og:title" content="iBookIt">
<meta property="og:url" content="https://ibookit.beeuc.com/index.html">
<meta property="og:site_name" content="iBookIt">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="iBookIt">





  
  
  <link rel="canonical" href="https://ibookit.beeuc.com/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>iBookIt</title>
  






  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?1d135936206fa682784515c37618ae6f";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>







  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">iBookIt</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home menu-item-active">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>

      
      
    </ul>
  

  

  
</nav>



  



</div>
    </header>

    
  
  

  

  <a href="http://github.com/beeuc-corp" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewbox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg></a>



    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://ibookit.beeuc.com/2019/06/22/preparation-for-iOS-App-Distribution/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="BEEUC">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="iBookIt">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/06/22/preparation-for-iOS-App-Distribution/" class="post-title-link" itemprop="url">iOS App 发布准备</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-06-22 00:20:51 / 修改时间：00:21:53" itemprop="dateCreated datePublished" datetime="2019-06-22T00:20:51+08:00">2019-06-22</time>
            

            
              

              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="iOS-App-发布准备"><a href="#iOS-App-发布准备" class="headerlink" title="iOS App 发布准备"></a>iOS App 发布准备</h1><h2 id="申请-Apple-开发者账号"><a href="#申请-Apple-开发者账号" class="headerlink" title="申请 Apple 开发者账号"></a>申请 Apple 开发者账号</h2><h3 id="申请-D-U-N-S-编号"><a href="#申请-D-U-N-S-编号" class="headerlink" title="申请 D-U-N-S 编号"></a>申请 D-U-N-S 编号</h3><p>如果 App 需要在 App Store 上发布，那么建议申请 “以组织身份注册” 的类型。如果选择以组织身份注册，还需要先为您的企业或组织申请 D-U-N-S (邓白氏) 码，请按照 <a href="https://developer.apple.com/enroll/duns-lookup/" target="_blank" rel="noopener">https://developer.apple.com/enroll/duns-lookup/</a> 的指引完成申请。如果企业资质健全，一般都能申请成功，通常 D-U-N-S 的申请需要几天时间完成。</p>
<div class="note info">
            <p>注册 D-U-N-S 需要提供如下信息以及联系人信息</p>
          </div>

<p><img src="/images/duns-request.png" alt="duns-request"></p>
<p>提交在线申请后，如果申请人是中国境内的组织实体，可能会收到 D &amp; B 的国内代理公司 (上海华夏邓白氏商业信息咨询有限公司) 发来的邮件，要求签署邮件附件中的确认知悉函，并提供以下信息</p>
<ul>
<li>公司清晰的营业执照正本（或副本）照片和公司公章刻字面的实物照片（如是事业单位请提供事业单位法人证）</li>
<li>公司中文名称（工商注册的中文名，如有更名情况，请同时提供更名前和更名后的名称）、英文名（如无正式的英文名按字面翻译）</li>
<li>中文办公地址、英文办公地址</li>
<li>邮编</li>
<li>企业类型</li>
<li>是否是独立企业（公司有无分公司或办事处，只需填有或无）</li>
<li>公司英文简称或英文商标（如果没有可以填无）</li>
<li>主营业务（一个最主要的业务）</li>
<li>员工人数（请尽量精确,例:10人；不要填区间,例：10-20人）</li>
<li>本项目联系人（务必填写申请公司的本项目联系人），包括姓名、 性别、 职务和电话（公司座机和联系人手机，所提供座机和办公地址保持一致）</li>
</ul>
<h3 id="完成苹果开发者注册"><a href="#完成苹果开发者注册" class="headerlink" title="完成苹果开发者注册"></a>完成苹果开发者注册</h3><p>以组织身份注册苹果开发者，需要在获得 D-U-N-S 编号后，才可以继续完成注册，需要提供如下信息</p>
<div class="note info">
            <p>苹果开发者的注册地址是 <a href="https://developer.apple.com/programs/" target="_blank" rel="noopener">https://developer.apple.com/programs/</a>，网站上有详细的流程介绍。</p>
          </div>

<p><img src="/images/ios-dev-register.png" alt="ios-dev-register"></p>
<div class="note info">
            <p>开发者账号注册好之后，才可以进行后续步骤。</p>
          </div>

<h2 id="常用网站"><a href="#常用网站" class="headerlink" title="常用网站"></a>常用网站</h2><ul>
<li>Apple 开发者网站 - <a href="https://developer.apple.com" target="_blank" rel="noopener">https://developer.apple.com</a>， 管理 App ID，签名证书，Provisioning Profile 等</li>
<li>App Store Connect 网站 - <a href="https://appstoreconnect.apple.com" target="_blank" rel="noopener">https://appstoreconnect.apple.com</a>，管理 App，Test Flight 测试版本，用户等</li>
<li>Apple ID 管理网站 - <a href="https://appleid.apple.com/cn" target="_blank" rel="noopener">https://appleid.apple.com/cn</a>，管理开发者的 Apple ID，需要在里边创建 App specific password，在上传 ipa 文件的命令中需要使用</li>
</ul>
<h2 id="创建-App-ID"><a href="#创建-App-ID" class="headerlink" title="创建 App ID"></a>创建 App ID</h2><p>在 <a href="https://developer.apple.com" target="_blank" rel="noopener">https://developer.apple.com</a> 网站为 App 创建一个 App ID，创建 App ID 是为了创建 Bundle ID （PRODUCT_BUNDLE_IDENTIFIER）。如果在 Xcode 工程中使用 xcconfig，则 release build 的 xcconfig 中可以设置 <code>PRODUCT_BUNDLE_IDENTIFIER = &quot;创建 App ID 时指定的 Bundle ID&quot;。</code></p>
<h2 id="创建-iOS-Distribution-证书"><a href="#创建-iOS-Distribution-证书" class="headerlink" title="创建 iOS Distribution 证书"></a>创建 iOS Distribution 证书</h2><p>这个证书用于 Xcode 编译过程中为生成的 ipa 文件签名，如果还没有创建该证书，则可以使用 Xcode 创建该证书。创建的方法是进入到 Xcode &gt; Preferences &gt; Accounts &gt; Manage Certificates…, 点 + 号，选择 iOS Distribution。</p>
<p>创建出来后，可以在主机的 Keychain Access 应用中将该证书导出为一个 .p12 文件备用，一般需要将这个证书再安装到编译服务器上去。 </p>
<h2 id="创建-iOS-Provisioning-Profiles-Distribution"><a href="#创建-iOS-Provisioning-Profiles-Distribution" class="headerlink" title="创建 iOS Provisioning Profiles (Distribution)"></a>创建 iOS Provisioning Profiles (Distribution)</h2><p>在 <a href="https://developer.apple.com" target="_blank" rel="noopener">https://developer.apple.com</a> 网站为 App 创建一个 iOS Provisioning Profiles (Distribution)，这个文件也是在 Xcode 编译时使用。创建时，需要选择已经创建好的 App ID，以及 iOS Distribution 证书。创建好的 iOS Provisioning Profiles (Distribution) 文件可以下载下来，安装到编译服务器上。</p>
<h2 id="配置-release-xcconfig-文件"><a href="#配置-release-xcconfig-文件" class="headerlink" title="配置 release xcconfig 文件"></a>配置 release xcconfig 文件</h2><p>建议在工程中使用 release xcconfig 文件，可以在该文件中配置好以下几项配置。在工程的 Build Settings 中将相应的属性设置为对应的参数。如将 Provisioning Profile &gt; Release 设置为 <code>${PROVISIONING_PROFILE_SPECIFIER}</code>，将 Packaging &gt; Product Bundle Identifier &gt; Release 设置为  <code>${PRODUCT_BUNDLE_IDENTIFIER}</code> 以此类推。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">PRODUCT_BUNDLE_IDENTIFIER = 创建 App ID 时指定的 Bundle ID</span><br><span class="line">PRODUCT_NAME = 应用名字</span><br><span class="line">DEVELOPMENT_TEAM = 开发者 Team ID 号码，在 developer.apple.com 查看账号信息可以查到  </span><br><span class="line">CODE_SIGN_IDENTITY = 签名证书 ID，查看签名证书属性可以查到 </span><br><span class="line">PROVISIONING_PROFILE_SPECIFIER = iOS Provisioning Profiles (Distribution) 的名字</span><br></pre></td></tr></table></figure>

<h2 id="在-App-Store-Connect-创建应用"><a href="#在-App-Store-Connect-创建应用" class="headerlink" title="在 App Store Connect 创建应用"></a>在 App Store Connect 创建应用</h2><p>在 App Store Connect 网站中创建一个新的 iOS App，创建应用时选择之前创建的 Bundle ID。只有创建 App 后才可以上传改应用的 ipa 文件。</p>
<h2 id="编译-Release-版本应用-ipa-文件并将其上传到-App-Store-Connect"><a href="#编译-Release-版本应用-ipa-文件并将其上传到-App-Store-Connect" class="headerlink" title="编译 Release 版本应用 ipa 文件并将其上传到 App Store Connect"></a>编译 Release 版本应用 ipa 文件并将其上传到 App Store Connect</h2><p>建议在编译服务器通过命令行方式编译用于发布的 ipa 文件，然后通过命令行进行上传。可以使用 Jenkins 等 CI/CD 工具，将这一过程自动化。编译命令和上传命令示例如下</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">xcodebuild -target $&#123;TARGET&#125; -configuration Release -project $&#123;PROJECT_FILE&#125;</span><br><span class="line">xcrun altool --upload-app -f ./release/$&#123;RELEASE_IPA_FILE&#125; -u $&#123;USER_APPLE_ID&#125; -p "$&#123;APP_SPECIFIC_PASSWORD&#125;"</span><br></pre></td></tr></table></figure>

<div class="note info">
            <p>苹果现在要求 altool 命令中不能再使用用户的登录密码，而需要使用 App Specific Password，这个密码需要在 Apple ID 管理网站中创建</p>
          </div>

<h2 id="通过-Test-Flight-安装-App-测试"><a href="#通过-Test-Flight-安装-App-测试" class="headerlink" title="通过 Test Flight 安装 App 测试"></a>通过 Test Flight 安装 App 测试</h2><p>Test Flight 是苹果推荐的 App 发布前的测试和 Beta 手段， ipa 上传到 App Store Connect 后，测试人员可以通过 Test Flight 安装新上传的 App，进行必要的测试。有关 Test Flight 的使用方法可以参考 <a href="https://developer.apple.com/testflight/" target="_blank" rel="noopener">https://developer.apple.com/testflight/</a></p>
<h2 id="提交审核"><a href="#提交审核" class="headerlink" title="提交审核"></a>提交审核</h2><p>新版本应用通过测试后，可以将其提交审核。在 <a href="https://appstoreconnect.apple.com" target="_blank" rel="noopener">https://appstoreconnect.apple.com</a> 网站上提供必要的信息，然后提交审核即可。苹果一般几天后开始审核，如果审核成功，则 App 可以发布到 App Store。如果审核失败，苹果会提供反馈信息，说明审核失败的原因，需要根据反馈进行必要的修改或者同审核人员进行必要的沟通。可以参考苹果文档 <a href="https://help.apple.com/app-store-connect/#/dev34e9bbb5a" target="_blank" rel="noopener">https://help.apple.com/app-store-connect/#/dev34e9bbb5a</a> 查看更详细的说明。</p>
<div class="note warning">
            <p>苹果现在要求所有应用需要提供《隐私协议》链接，需要将准备好的《隐私协议》放到公司网站后，将地址链接填入 App 审核申请中对应的空格。</p><p>另外，有时苹果要求提供 App 使用的 Demo 视频，建议录制一个 Demo 视频，在申请表中提供视频的地址链接。</p>
          </div>







          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://ibookit.beeuc.com/2019/06/21/githubpages-aliyun-cdn/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="BEEUC">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="iBookIt">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/06/21/githubpages-aliyun-cdn/" class="post-title-link" itemprop="url">使用阿里云 CDN 加速 GitHub Pages 网站</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-06-21 13:00:07 / 修改时间：13:04:47" itemprop="dateCreated datePublished" datetime="2019-06-21T13:00:07+08:00">2019-06-21</time>
            

            
              

              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="创建一个-github-pages-项目"><a href="#创建一个-github-pages-项目" class="headerlink" title="创建一个 github pages 项目"></a>创建一个 github pages 项目</h2><p>注意 项目名字需要符合 username.github.io 的格式，例如 ibookit.github.io</p>
<p><img src="/images/create-a-github-io-repo.png" alt="image-20190620234014224"></p>
<p>在项目的 settings 中可以看到</p>
<p><img src="/images/github-pages-setting.png" alt="image-20190620234014224"></p>
<p>##注册一个域名 </p>
<p>前往阿里云域名服务 <a href="https://wanwang.aliyun.com" target="_blank" rel="noopener">https://wanwang.aliyun.com</a>，注册一个域名</p>
<p><img src="/images/reg-a-domain-name.png" alt="image-20190620233606504"></p>
<p>域名注册成功后，前往 github pages 工程的 settings 中，设置自定义域名</p>
<p><img src="/images/custom-domain-name.png" alt="image-20190620234303458"></p>
<p>Save 之后可以看到，github pages 工程中显示的网站地址已经由 <a href="https://ibookit.github.io/" target="_blank" rel="noopener">https://ibookit.github.io/</a> 变成了 <a href="http://www.ibookit.cn" target="_blank" rel="noopener">http://www.ibookit.cn</a></p>
<p><img src="/images/github-pages-setting-2.png" alt="image-20190620234444692"></p>
<h2 id="申请和配置-CDN"><a href="#申请和配置-CDN" class="headerlink" title="申请和配置 CDN"></a>申请和配置 CDN</h2><p>前往阿里云控制台，进入产品 &gt; 全站加速，开通全站加速服务</p>
<p><img src="/images/website-cdn.png" alt="image-20190620234933764"></p>
<p>返回控制台，添加一个加速域名。完成表单输入后，确认提交</p>
<ul>
<li>加速域名，输入网站域名</li>
<li>源站类型，选择源站域名</li>
<li>源站域名，输入 github pages 项目的原始域名，例如 ibookit.github.io </li>
</ul>
<blockquote>
<p>注意，加速域名需要完成备案，否则无法提交</p>
</blockquote>
<p><img src="/images/add-a-cdn-site.png" alt="image-20190620235145746"></p>
<h2 id="设置-DNS-CNAME-域名解析"><a href="#设置-DNS-CNAME-域名解析" class="headerlink" title="设置 DNS CNAME 域名解析"></a>设置 DNS CNAME 域名解析</h2><p>CDN 加速域名创建成功后，会获得一个 CNAME 域名，前往域名管理，为加速域名设置 CNAME 解析。详细说明可参考 <a href="https://help.aliyun.com/document_detail/64928.html?spm=5176.11220512.0.0.529e72f01ABTTY" target="_blank" rel="noopener">https://help.aliyun.com/document_detail/64928.html?spm=5176.11220512.0.0.529e72f01ABTTY</a></p>
<blockquote>
<p>在记录值处，输入上一步获得的 CNAME 域名地址</p>
</blockquote>
<p><img src="/images/cname-record.png" alt="image-20190621005125464"></p>
<p>域名解析设置生效后，即可使用 CDN 加速域名访问您的 github pages 网站。</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://ibookit.beeuc.com/2019/05/11/Fenced-Code-Block-Syntax-Highlight-with-Jekyll/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="BEEUC">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="iBookIt">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/05/11/Fenced-Code-Block-Syntax-Highlight-with-Jekyll/" class="post-title-link" itemprop="url">Fenced Code Block Syntax Highlight with Jekyll</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-05-11 00:00:00" itemprop="dateCreated datePublished" datetime="2019-05-11T00:00:00+08:00">2019-05-11</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-06-21 23:39:04" itemprop="dateModified" datetime="2019-06-21T23:39:04+08:00">2019-06-21</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Jekyll/" itemprop="url" rel="index"><span itemprop="name">Jekyll</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Fenced-Code-Block-Syntax-Highlight-with-Jekyll"><a href="#Fenced-Code-Block-Syntax-Highlight-with-Jekyll" class="headerlink" title="Fenced Code Block Syntax Highlight with Jekyll"></a>Fenced Code Block Syntax Highlight with Jekyll</h1><p>This article recorded how we configured jekyll with kramdown and rouge for fenced code block syntax highlight.</p>
<h2 id="How-to"><a href="#How-to" class="headerlink" title="How to"></a>How to</h2><ul>
<li><p>install some gem packages</p>
<ul>
<li>sudo gem install jekyll</li>
<li>sudo gem install kramdown-syntax-coderay</li>
<li>sudo gem install rouge</li>
<li>sudo gem install coderay</li>
</ul>
</li>
<li><p>generate a rouge css file </p>
<ul>
<li>rougify style github &gt; assets/rouge.css</li>
<li>include the rouge.css in template file, e.g., head.html </li>
</ul>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- in head.html --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"&#123;&#123;"</span>/<span class="attr">assets</span>/<span class="attr">rouge.css</span>" | <span class="attr">relative_url</span> &#125;&#125;"&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>add the following block in the generated rouge.css file for a better padding</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">pre</span><span class="selector-class">.highlight</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="attribute">padding-top</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">padding-right</span>: <span class="number">0.5em</span>;</span><br><span class="line">  <span class="attribute">padding-bottom</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">padding-left</span>: <span class="number">0.5em</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>_config.yml</li>
</ul>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">highlighter:</span> <span class="string">rouge</span></span><br><span class="line"><span class="attr">markdown:</span> <span class="string">kramdown</span></span><br><span class="line"><span class="attr">kramdown:</span></span><br><span class="line"><span class="attr">    input:</span> <span class="string">GFM</span> </span><br><span class="line"><span class="attr">    enable_coderay:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">    syntax_highlighter:</span> <span class="string">rouge</span></span><br><span class="line"><span class="attr">    syntax_highlighter_opts:</span> </span><br><span class="line"><span class="attr">        wrap:</span> <span class="string">div</span> </span><br><span class="line"><span class="attr">        line_numbers:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>

<h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><ul>
<li><a href="https://jekyllrb.com/docs/configuration/markdown/" target="_blank" rel="noopener">https://jekyllrb.com/docs/configuration/markdown/</a></li>
<li><a href="https://kramdown.gettalong.org/options.html#option-syntax-highlighter" target="_blank" rel="noopener">https://kramdown.gettalong.org/options.html#option-syntax-highlighter</a></li>
<li><a href="https://github.com/jneen/rouge" target="_blank" rel="noopener">https://github.com/jneen/rouge</a></li>
<li><a href="https://cloud.tencent.com/developer/article/1341156" target="_blank" rel="noopener">https://cloud.tencent.com/developer/article/1341156</a></li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://ibookit.beeuc.com/2019/04/12/notarizing-mac-app/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="BEEUC">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="iBookIt">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/04/12/notarizing-mac-app/" class="post-title-link" itemprop="url">How to upload macos App for notarization by command-line tools</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-04-12 00:00:00" itemprop="dateCreated datePublished" datetime="2019-04-12T00:00:00+08:00">2019-04-12</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-06-22 00:26:36" itemprop="dateModified" datetime="2019-06-22T00:26:36+08:00">2019-06-22</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/App-development/" itemprop="url" rel="index"><span itemprop="name">App-development</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="How-to-upload-macos-App-for-notarization-by-command-line-tools"><a href="#How-to-upload-macos-App-for-notarization-by-command-line-tools" class="headerlink" title="How to upload macos App for notarization by command-line tools"></a>How to upload macos App for notarization by command-line tools</h1><p>As required by Apple below recently, macos App developers need to upload the Apps they developed to Apple for a notarization before distributing the Apps. </p>
<div class="note warning">
            <p>With the public release of macOS 10.14.5, we require that all developers creating a Developer ID certificate for the first time notarize their apps, and that all new and updated kernel extensions be notarized as well. This will help give users more confidence that the software they download and run, no matter where they get it from, is not malware by showing a more streamlined Gatekeeper interface. In addition, we’ve made the following enhancements to the notarization process.</p>
          </div>

<p>Refer to <a href="https://developer.apple.com/documentation/security/notarizing_your_app_before_distribution" target="_blank" rel="noopener">Notarizing Your App Before Distribution</a> for more background. </p>
<h2 id="How-to"><a href="#How-to" class="headerlink" title="How to"></a>How to</h2><p>To integrate the notarization steps into the CI system, we added the following steps in our automation build scripts.</p>
<h3 id="Upload-the-App-archive"><a href="#Upload-the-App-archive" class="headerlink" title="Upload the App archive"></a>Upload the App archive</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">APP_PATH=<span class="string">"./<span class="variable">$&#123;PRODUCT_NAME&#125;</span>.app"</span></span><br><span class="line">ZIP_PATH=<span class="string">"./<span class="variable">$&#123;PRODUCT_NAME&#125;</span>.zip"</span></span><br><span class="line"></span><br><span class="line">/usr/bin/ditto -c -k --keepParent <span class="string">"<span class="variable">$APP_PATH</span>"</span> <span class="string">"<span class="variable">$ZIP_PATH</span>"</span></span><br><span class="line"></span><br><span class="line">xcrun altool --notarize-app --primary-bundle-id <span class="variable">$&#123;BUNDLE_IDENTIFIER&#125;</span> -u <span class="variable">$&#123;APP_ACCOUNT&#125;</span> -p <span class="variable">$&#123;APP_SPEC_PASSWD&#125;</span> --asc-provider <span class="string">"<span class="variable">$&#123;DEVELOPMENT_TEAM&#125;</span>"</span> --file <span class="variable">$&#123;ZIP_PATH&#125;</span></span><br></pre></td></tr></table></figure>

<p>The <code>--asc-provider</code> parameter is needed for us as our App management account is being used by more than one orgnizations. Otherwise the <code>--notarize-app</code> command would fail with the following error prompt message. </p>
<div class="note danger">
            <p>Error: Your Apple ID account is attached to other iTunes providers. You will need to specify which provider you intend to submit content to by using the -itc_provider command. Please contact us if you have questions or need help. (1627)</p><p>However, we didn’t find how -itc_provider can be specified, but found the —asc-provider parameter. Maybe the prompt itself is a mistake.</p>
          </div>

<p>Apple’s official documentation states that the notarization could complete in about 1 hour. We found it usually complete in several minutes and we would receive the email notification shortly after we have had the archive uploaded.</p>
<h3 id="Upload-the-installer-package"><a href="#Upload-the-installer-package" class="headerlink" title="Upload the installer package"></a>Upload the installer package</h3><p><code>xcrun altool --notarize-app --primary-bundle-id ${BUNDLE_IDENTIFIER} -u ${APP_ACCOUNT} -p ${APP_SPEC_PASSWD} --asc-provider &quot;${DEVELOPMENT_TEAM}&quot; --file ${WORKSPACE}/${RELEASE_PKG_NAME}</code></p>
<blockquote>
<p>Be sure to use –timestamp paramether w/ the productsign command when signing the installer package file. Otherwise the notarization could fail due to the issue that the signature doesn’t contain a valid timestamp. </p>
</blockquote>
<p>Refer to <a href="https://developer.apple.com/documentation/security/notarizing_your_app_before_distribution/resolving_common_notarization_issues" target="_blank" rel="noopener">Resolving common notarization issues</a>.</p>
<h3 id="Check-the-notarization-result"><a href="#Check-the-notarization-result" class="headerlink" title="Check the notarization result"></a>Check the notarization result</h3><p>Once received the email notification of the completion of the notarization, you’d better check the notarization log  even it’s a successful result as suggested by Apple. </p>
<p>To obtain detailed information about a particular submission, use <code>altool</code> along with the <code>notarization-info</code> flag and the UUID for the submission. The UUID is printed when the <code>altool —notarize-app</code> command finished. For more details about how to check the status and log, refer to <a href="https://developer.apple.com/documentation/security/notarizing_your_app_before_distribution/customizing_the_notarization_workflow#3087732" target="_blank" rel="noopener">Customizing the notarization workflow</a>. </p>
<h3 id="Staple-your-App-and-the-installer-package"><a href="#Staple-your-App-and-the-installer-package" class="headerlink" title="Staple your App and the installer package"></a>Staple your App and the installer package</h3><p>Notarization produces a ticket that tells Gatekeeper that your app is notarized. After notarization completes successfully, the next time any user attempts to run your app on macOS 10.14 or later, Gatekeeper finds the ticket online. This includes users who downloaded your app before notarization. You should also attach the ticket to your software using the <code>stapler</code> tool, so that future distributions include the ticket. This ensures that Gatekeeper can find the ticket even when a network connection isn’t available. </p>
<p>For the details about how to staple the files, refer to <a href="https://developer.apple.com/documentation/security/notarizing_your_app_before_distribution/customizing_the_notarization_workflow#3087732" target="_blank" rel="noopener">Customizing the notarization workflow</a> too. </p>
<h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><ul>
<li><a href="https://developer.apple.com/documentation/security/notarizing_your_app_before_distribution" target="_blank" rel="noopener">Notarizing Your App Before Distribution</a> </li>
<li><a href="https://developer.apple.com/documentation/security/notarizing_your_app_before_distribution/resolving_common_notarization_issues" target="_blank" rel="noopener">Resolving common notarization issues</a></li>
<li><a href="https://developer.apple.com/documentation/security/notarizing_your_app_before_distribution/customizing_the_notarization_workflow#3087732" target="_blank" rel="noopener">Customizing the notarization workflow</a></li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  


          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">BEEUC</p>
              <div class="site-description motion-element" itemprop="description"></div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">4</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                      <a href="/categories/">
                    
                  
                    
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">2</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
            </nav>
          

          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                  
                    
                  
                  <a href="https://github.com/beeuc-corp" title="GitHub &rarr; https://github.com/beeuc-corp" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i></a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                  
                    
                  
                  <a href="mailto:info@beeuc.com" title="E-Mail &rarr; mailto:info@beeuc.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i></a>
                </span>
              
            </div>
          

          

          
          

          
            
          
          

        </div>
      </div>

      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">BEEUC</span>

  

  
</div>


  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.9.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.1.2</div>




        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="post-meta-item-icon">
      <i class="fa fa-user"></i>
    </span>
    <span class="site-uv" title="总访客量">
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
    </span>
  

  
    <span class="post-meta-divider">|</span>
  

  
    <span class="post-meta-item-icon">
      <i class="fa fa-eye"></i>
    </span>
    <span class="site-pv" title="总访问量">
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
    </span>
  
</div>









        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=3.4.1"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/utils.js?v=7.1.2"></script>

  <script src="/js/motion.js?v=7.1.2"></script>



  
  


  <script src="/js/affix.js?v=7.1.2"></script>

  <script src="/js/schemes/pisces.js?v=7.1.2"></script>




  

  


  <script src="/js/next-boot.js?v=7.1.2"></script>


  

  

  

  



  




  

  

  

  

  

  

  

  

  

  

  

  

  

  

</body>
</html>
